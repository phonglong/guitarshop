<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');require_once ("secure_area.php");class Admin_users extends Secure_area {	public function __construct()    {        parent::__construct();    }	public function index()	{ 			$this->load->model('user_model');		$config['total_rows']=$this->user_model->countUser();        $config['base_url']= ('admin_users/sorting');        $config['per_page']= $this->config->item('number_of_items_per_page') ? (int)$this->config->item('number_of_items_per_page') : 20;         // $config['uri_segment']=4;		$data['controller_name']=strtolower(get_class());		$data['per_page'] = $config['per_page'];		 $data['manage_table']=get_employees_manage_table($this->user_model->get_all($data['per_page']),$this);		/*css */				   $config['full_tag_open']  = '<ul id="pagination">';                   $config['full_tag_close']  = '</ul>';                   $config['cur_tag_open']  = '<li class="active "><span>';                   $config['cur_tag_close'] = '</span></li>';                   $config['next_link'] = 'Next >';                   $config['next_tag_open'] = '<li class="next">';                   $config['next_tag_close'] = '</li>';                   $config['num_tag_open'] = '<li>';                   $config['num_tag_close'] = '</li>';                   $config['prev_link'] = '< Previous';                   $config['prev_tag_open'] = '<li class="prev ">';                   $config['prev_tag_close'] = '</li>';				   $config['last_link'] = 'Last';                   $config['last_tag_open'] = '<li>';                   $config['last_tag_close'] = '</li>';                   $config['first_link'] = 'First';                   $config['first_tag_open'] = '<li>';                   $config['first_tag_close'] = '</li>';		$this->pagination->initialize($config); 		// $data['users']=$this->user_model->get_all($limit,$offset);		$data['pagination']=$this->pagination->create_links();		 $this->load->view('admin/user/user',$data);	}		function sorting()	{		// $search=$this->input->post('search');		$per_page=$this->config->item('number_of_items_per_page') ? (int)$this->config->item('number_of_items_per_page') : 20;		// if ($search)		// {			// $config['total_rows'] = $this->Item->search_count_all($search);			// $table_data = $this->Item->search($search,$per_page,$this->input->post('offset') ? $this->input->post('offset') : 0, $this->input->post('order_col') ? $this->input->post('order_col') : 'name' ,$this->input->post('order_dir') ? $this->input->post('order_dir'): 'asc');		// }		// else		// {		// $config['uri_segment']=3;			$config['total_rows'] = $this->User_model->countUser();			$table_data = $this->User_model->get_all($per_page,$this->input->post('offset') ? $this->input->post('offset') : 0, $this->input->post('order_col') ? $this->input->post('order_col') : 'id' ,'asc');		// }		// print_r($this->input->post('offset'));		// print_r($table_data);		$config['base_url'] = site_url('admin_users/sorting');		$config['per_page'] = $per_page; 					$config['full_tag_open']  = '<ul id="pagination">';                   $config['full_tag_close']  = '</ul>';                   $config['cur_tag_open']  = '<li class="active "><span>';                   $config['cur_tag_close'] = '</span></li>';                   $config['next_link'] = 'Next >';                   $config['next_tag_open'] = '<li class="next">';                   $config['next_tag_close'] = '</li>';                   $config['num_tag_open'] = '<li>';                   $config['num_tag_close'] = '</li>';                   $config['prev_link'] = '< Previous';                   $config['prev_tag_open'] = '<li class="prev ">';                   $config['prev_tag_close'] = '</li>';				   $config['last_link'] = 'Last';                   $config['last_tag_open'] = '<li>';                   $config['last_tag_close'] = '</li>';                   $config['first_link'] = 'First';                   $config['first_tag_open'] = '<li>';                   $config['first_tag_close'] = '</li>';		$this->pagination->initialize($config);		$data['pagination'] = $this->pagination->create_links();		$data['manage_table']=get_employees_manage_table_data_rows($table_data,$this);		echo json_encode(array('manage_table' => $data['manage_table'], 'pagination' => $data['pagination']));		}		public function view()	{		$this->load->view('admin/user/view');	}	function suggest()	{		$suggestions = "ok";		echo json_encode($suggestions);	}	function delete() {        $items_to_delete = $this->input->post('ids');		$this->load->model('user_model');        if ($this->user_model->delete($items_to_delete)) {            echo json_encode(array('success' => true, 'message' => lang('items_successful_deleted'). ' ' . lang('items_one_or_multiple')));        } else {            echo json_encode(array('success' => false, 'message' => lang('items_cannot_be_deleted')));        }    }	function active(){		$this->load->model('user_model');		$this->user_model->active();	}	function save(){		$this->load->model('user_model');		$user_data = array(            'name' => $this->input->post('name'),            'user' => $this->input->post('username'),            'password' => $this->input->post('password'),		);		if($layid = $this->user_model->save($user_data)){			echo json_encode(array('success' => true, 'message' => lang('items_successful_adding')			,'id'=>$layid ));		}else {//failure            echo json_encode(array('success' => false, 'message' => lang('items_error_adding_updating')));        }	}	function get_row(){		$this->load->model('user_model');		$id = $this->input->post('id');		$data_row= $this->user_model->get_info($id);		echo $data_row;	}	function search()	{		$per_page=$this->config->item('number_of_items_per_page') ? (int)$this->config->item('number_of_items_per_page') : 20;		$config['uri_segment']=4;			$config['total_rows'] = $this->User_model->countUser();			$table_data = $this->User_model->get_all($per_page,$this->input->post('offset') ? $this->input->post('offset') : 0, $this->input->post('order_col') ? $this->input->post('order_col') : 'id' ,'asc');			$config['base_url'] = site_url('admin_users/search');		$config['per_page'] = $per_page; 				   $config['full_tag_open']  = '<ul id="pagination">';                   $config['full_tag_close']  = '</ul>';                   $config['cur_tag_open']  = '<li class="active "><span>';                   $config['cur_tag_close'] = '</span></li>';                   $config['next_link'] = 'Next >';                   $config['next_tag_open'] = '<li class="next">';                   $config['next_tag_close'] = '</li>';                   $config['num_tag_open'] = '<li>';                   $config['num_tag_close'] = '</li>';                   $config['prev_link'] = '< Previous';                   $config['prev_tag_open'] = '<li class="prev ">';                   $config['prev_tag_close'] = '</li>';				   $config['last_link'] = 'Last';                   $config['last_tag_open'] = '<li>';                   $config['last_tag_close'] = '</li>';                   $config['first_link'] = 'First';                   $config['first_tag_open'] = '<li>';                   $config['first_tag_close'] = '</li>';		$this->pagination->initialize($config);		$data['pagination'] = $this->pagination->create_links();		$data['manage_table']=get_employees_manage_table_data_rows($table_data,$this);		echo json_encode(array('manage_table' => $data['manage_table'], 'pagination' => $data['pagination']));		}}?>